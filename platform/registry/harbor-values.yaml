# platform/registry/harbor-values.yaml

externalURL: https://registry.pheonix.live

expose:
  type: clusterIP
  clusterIP:
    name: harbor
    ports:
      httpPort: 80
      httpsPort: 443
  # Add required TLS configuration even though we're using clusterIP
  tls:
    enabled: false
    auto:
      commonName: registry.pheonix.live  # This is what was missing
  

# Explicitly disable ingress at all levels
portal:
  ingress:
    enabled: false

core:
  ingress:
    enabled: false

registry:
  ingress:
    enabled: false

notary:
  server:
    ingress:
      enabled: false
  signer:
    ingress:
      enabled: false

# Rest of your configuration
persistence:
  enabled: true
  imageChartStorage:
    storageClass: "do-block-storage-retain"
    size: 5Gi

database:
  internal:
    persistence:
      storageClass: "do-block-storage-retain" 
      size: 2Gi

redis:
  enabled: true
